{"version":1,"ops":[{"type":1,"author":{"id":"6a0aeab8ae8e7bf93407c51e9b2a4d9d0273c9ad"},"timestamp":1564107839,"metadata":{"github-id":"MDU6SXNzdWU0NzMxNDU5Mjc=","github-url":"https://github.com/fraction/oasis/issues/6","origin":"github"},"title":"oasis Error: could not connect to sbot","message":"Seems like this only happens the first time you start the server?\n\n```\n  oasis Listening on http://localhost:3000/ +0ms\n  oasis Initial connection attempt failed +0ms\n  oasis Starting Scuttlebutt server +0ms\nssb-friends: stream legacy api used\n  oasis Error: could not connect to sbot\n  oasis     at /home/christianbundy/.config/yarn/global/node_modules/ssb-client/client.js:70:23\n  oasis     at next (/home/christianbundy/.config/yarn/global/node_modules/multiserver/compose.js:24:14)\n  oasis     at /home/christianbundy/.config/yarn/global/node_modules/multiserver/compose.js:34:9\n  oasis     at _cb (/home/christianbundy/.config/yarn/global/node_modules/multiserver/plugins/shs.js:28:20)\n  oasis     at /home/christianbundy/.config/yarn/global/node_modules/secret-handshake/protocol.js:118:22\n  oasis     at /home/christianbundy/.config/yarn/global/node_modules/pull-handshake/index.js:10:5\n  oasis     at /home/christianbundy/.config/yarn/global/node_modules/pull-handshake/index.js:23:13\n  oasis     at callback (/home/christianbundy/.config/yarn/global/node_modules/pull-pushable/index.js:81:7)\n  oasis     at drain (/home/christianbundy/.config/yarn/global/node_modules/pull-pushable/index.js:68:39)\n  oasis   Error: shs.client: server hung up when we sent hello (phase 3).\n  oasis Possibly we dailed a wrong number, or the server does not wish to talk to us.\n  oasis     at abort (/home/christianbundy/.config/yarn/global/node_modules/secret-handshake/protocol.js:37:45)\n  oasis     at Object.cb (/home/christianbundy/.config/yarn/global/node_modules/secret-handshake/protocol.js:52:26)\n  oasis     at drain (/home/christianbundy/.config/yarn/global/node_modules/pull-reader/index.js:43:23)\n  oasis   Error: stream ended with:64 but wanted:80\n  oasis     at drain (/home/christianbundy/.config/yarn/global/node_modules/pull-reader/index.js:43:26)\n  oasis     at /home/christianbundy/.config/yarn/global/node_modules/pull-reader/index.js:63:18\n  oasis     at /home/christianbundy/.config/yarn/global/node_modules/pull-reader/index.js:20:7\n  oasis     at drain (/home/christianbundy/.config/yarn/global/node_modules/stream-to-pull-stream/index.js:126:18)\n  oasis     at Socket.\u003canonymous\u003e (/home/christianbundy/.config/yarn/global/node_modules/stream-to-pull-stream/index.js:147:5)\n  oasis     at Socket.emit (events.js:203:15)\n  oasis     at TCP._handle.close (net.js:606:12) +6s\n  oasis Retrying connection to own server +3s\n\n  TypeError: Cannot read property 'read' of undefined\n      at Promise.all.messages.map (/home/christianbundy/.config/yarn/global/node_modules/@fraction/oasis/src/pages/models/post.js:27:59)\n      at Array.map (\u003canonymous\u003e)\n      at transform (/home/christianbundy/.config/yarn/global/node_modules/@fraction/oasis/src/pages/models/post.js:10:69)\n      at pull.collect (/home/christianbundy/.config/yarn/global/node_modules/@fraction/oasis/src/pages/models/post.js:188:19)\n      at /home/christianbundy/.config/yarn/global/node_modules/pull-stream/sinks/reduce.js:10:5\n      at /home/christianbundy/.config/yarn/global/node_modules/pull-stream/sinks/drain.js:20:24\n      at PacketStreamSubstream.weird.read (/home/christianbundy/.config/yarn/global/node_modules/muxrpc/pull-weird.js:33:7)\n      at PacketStream._onstream (/home/christianbundy/.config/yarn/global/node_modules/packet-stream/index.js:200:12)\n      at PacketStream.write (/home/christianbundy/.config/yarn/global/node_modules/packet-stream/index.js:135:41)\n      at /home/christianbundy/.config/yarn/global/node_modules/muxrpc/pull-weird.js:56:15\n\n\n  TypeError: Cannot read property 'read' of undefined\n      at Promise.all.messages.map (/home/christianbundy/.config/yarn/global/node_modules/@fraction/oasis/src/pages/models/post.js:27:59)\n      at Array.map (\u003canonymous\u003e)\n      at transform (/home/christianbundy/.config/yarn/global/node_modules/@fraction/oasis/src/pages/models/post.js:10:69)\n      at pull.collect (/home/christianbundy/.config/yarn/global/node_modules/@fraction/oasis/src/pages/models/post.js:188:19)\n      at /home/christianbundy/.config/yarn/global/node_modules/pull-stream/sinks/reduce.js:10:5\n      at /home/christianbundy/.config/yarn/global/node_modules/pull-stream/sinks/drain.js:20:24\n      at PacketStreamSubstream.weird.read (/home/christianbundy/.config/yarn/global/node_modules/muxrpc/pull-weird.js:33:7)\n      at PacketStream._onstream (/home/christianbundy/.config/yarn/global/node_modules/packet-stream/index.js:200:12)\n      at PacketStream.write (/home/christianbundy/.config/yarn/global/node_modules/packet-stream/index.js:135:41)\n      at /home/christianbundy/.config/yarn/global/node_modules/muxrpc/pull-weird.js:56:15\n```","files":null}]}